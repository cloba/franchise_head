<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.ksmart.franchise.head.sub.repository.SubMapper">
<!-- POJO객체와 DB column명을 맞춰줍니다 -->
	<!-- menu 테이블 -->
	<resultMap type="org.ksmart.franchise.head.sub.model.Sub" id="SubResultMap">
		<id property="subCode" column="sub_code"/>
		<result property="headStaffId" column="head_staff_id"/>
		<result property="subRegitDate" column="sub_regit_date"/>
		<result property="subName" column="sub_name"/>
		<result property="subOwner" column="sub_owner"/>
		<result property="subTelephone" column="sub_telephone"/>
		<result property="subAddr" column="sub_addr"/>
	</resultMap>
	
	<!-- sub의 리스트를 봅니다 (검색포함)-->
	<select id="selectSub" parameterType="java.util.Map" resultMap="SubResultMap">
		SELECT menu_code, inte_code, menu_name, menu_ingre_price, menu_selling_price, head_staff_id, menu_regit_date, menu_status, menu_expired_date 
		FROM menu
		<where>
			<if test="menuSearch.searchKey != null and menuSearch.searchKey != '' and menuSearch.searchItem != null and menuSearch.searchItem != ''">
				${menuSearch.searchKey} like CONCAT('%',#{menuSearch.searchItem},'%') 
			</if>
			<if test="menuSearch.status != null and menuSearch.status != ''">
				AND menu_status = #{menuSearch.status}
			</if> 
		</where> 
		<trim prefix="ORDER BY">
			<if test="menuSearch.criteria == null or menuSearch.criteria == ''">
				menu_regit_date
			</if>
			<if test="menuSearch.criteria != null or menuSearch.criteria != ''">
				${menuSearch.criteria} ${menuSearch.upDown}
			</if>
		</trim>
	</select>
</mapper>