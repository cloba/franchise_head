<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.ksmart.franchise.head.royaltyExpected.repository.RoyaltyExpectedMapper">

<resultMap id="RoyaltyExpectedResultMap" type="org.ksmart.franchise.head.royaltyExpected.model.RoyaltyExpected" >
	<id property="royaltyExpectedCode" column="royalty_expected_code"/>
	<result property="contractCode" column="contract_code"/>
	<result property="royaltyExpectedStatus" column="royalty_expected_status"/>
	<result property="royaltyExpectedPaid" column="royalty_expected_paid"/>
	<result property="royaltyExpectedPayDate" column="royalty_expected_pay_date"/>
	<result property="royaltyExpectedRest" column="royalty_expected_rest"/>
</resultMap>

<!-- <resultMap id="" type="" >
	<result property="" column="sub_sell_profit_head"/>
	<result property="" column="sub_sell_practical_selling_price"/>
	<result property="" column="sub_sell_profit_sub"/>
</resultMap>
 -->

<select id="" resultMap="">

</select>





<select id="selectRoyaltyExpectedList" parameterType="java.util.Map" resultMap="RoyaltyExpectedResultMap">

		SELECT 
			sum(sub_sell_profit_head), sum(sub_sell_practical_selling_price), sum(sub_sell_profit_sub), total_account_group, store_code
		FROM	
			sub_sell
		<where>
			<if test='search.searchItem != null and search.searchItem != "" '>
				AND ${search.searchKey} like CONCAT('%',#{search.searchItem},'%')
			</if>
			<if test="royaltyExpected.lastMonth != null" >
				AND sub_sell_date like CONCAT('%',#{royaltyExpected.lastMonth},'%')
			</if>
		</where>
		<trim prefix="ORDER BY">
			<if test="search.criteria != null or search.criteria != ''">
				${search.criteria} ${search.upDown}
			</if>
		</trim>




</select>

</mapper>